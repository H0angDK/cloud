# Балансировка нагрузки с Flask и Nginx

Этот проект демонстрирует настройку балансировки нагрузки между несколькими экземплярами Flask-приложения с использованием Nginx.

## Структура проекта

- `app.py` - Flask-приложение с двумя эндпоинтами:
  - `/process` (POST) - принимает координаты и возвращает скорость
  - `/health` (GET) - проверка работоспособности сервиса
- `nginx.conf` - конфигурация Nginx для балансировки нагрузки
- `Dockerfile` - инструкции для сборки Flask-приложения
- `docker-compose.yml` - конфигурация для запуска всех сервисов

## Требования

- Docker
- Docker Compose

## Запуск проекта

1. Собрать и запустить контейнеры:
```bash
docker-compose up --build
```

2. Проверить работоспособность сервиса:
```bash
# Проверка health endpoint
curl http://localhost/health

# Отправка координат для обработки
curl -X POST -H "Content-Type: application/json" -d '{"coordinates": [55.7558, 37.6173]}' http://localhost/process
```

## Архитектура

Проект состоит из трех сервисов:
1. Два экземпляра Flask-приложения (flask1 и flask2)
2. Nginx в качестве балансировщика нагрузки

Nginx распределяет входящие запросы между двумя экземплярами Flask-приложения по алгоритму round-robin.

## Проверка балансировки

Чтобы убедиться, что запросы распределяются между контейнерами, можно просмотреть логи:
```bash
docker-compose logs flask1 flask2
``` 